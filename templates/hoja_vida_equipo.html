{% extends "base.html" %}

{% block title %}Hoja de Vida Equipo de Cómputo{% endblock %}

{% block content %}
<style>
    .institucional-header {
        background: linear-gradient(90deg, #2E7D32 60%, #1976D2 100%);
        color: white;
        padding: 1.2rem 1rem 1rem 1rem;
        border-radius: 10px 10px 0 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
        text-align: center;
    }
    .institucional-header img {
        height: 70px;
        margin: 0 auto 0.7rem auto;
        display: block;
    }
    .institucional-title {
        font-size: 1.2rem;
        font-weight: bold;
        letter-spacing: 1px;
        margin-bottom: 0.2rem;
    }
    .institucional-info, .institucional-doc {
        font-size: 0.95rem;
        margin-bottom: 0.2rem;
    }
    .institucional-table th, .institucional-table td {
        border: 1px solid #bdbdbd;
        padding: 0.3rem 0.4rem;
        font-size: 0.93rem;
        word-break: break-word;
    }
    .institucional-table th {
        background: #C8E6C9 !important;
        color: #2E7D32 !important;
        font-weight: bold;
    }
    .institucional-section {
        background: #f5f5f5;
        border-radius: 6px;
        margin-bottom: 1rem;
        padding: 0.7rem 0.3rem;
        box-shadow: 0 1px 4px #e0e0e0;
    }
    .institucional-section-title {
        color: #1976D2;
        font-weight: bold;
        margin-bottom: 0.5rem;
        font-size: 1.05rem;
    }
    .institucional-table {
        width: 100%;
        margin-bottom: 0.7rem;
    }
    .institucional-table-wrapper {
        width: 100%;
        overflow-x: auto;
    }
    @media (max-width: 768px) {
        .institucional-header {
            padding: 0.7rem 0.2rem 0.5rem 0.2rem;
        }
        .institucional-header img {
            height: 50px;
        }
        .institucional-title {
            font-size: 1rem;
        }
        .institucional-section {
            padding: 0.5rem 0.1rem;
        }
        .institucional-section-title {
            font-size: 0.98rem;
        }
        .institucional-table th, .institucional-table td {
            font-size: 0.85rem;
            padding: 0.18rem 0.2rem;
        }
    }
    @media print {
        .institucional-header {
            border-radius: 0 !important;
            box-shadow: none !important;
            page-break-after: avoid;
            background: #2E7D32 !important;
        }
        .institucional-header img {
            height: 50px !important;
            margin-bottom: 0.5rem !important;
        }
        .institucional-section {
            box-shadow: none !important;
            border-radius: 0 !important;
            margin-bottom: 0.5rem !important;
            padding: 0.5rem 0.5rem !important;
        }
        .institucional-table th, .institucional-table td {
            font-size: 0.8rem !important;
            padding: 0.15rem 0.2rem !important;
        }
        .institucional-title {
            font-size: 1rem !important;
        }
        .no-print { display: none !important; }
        @page {
            size: A4 portrait;
            margin: 1.2cm;
        }
    }
</style>
<div class="institucional-header">
    <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo Hospital">
    <div class="institucional-title">E.S.E HOSPITAL DIVINO SALVADOR DE SOPO</div>
    <div class="institucional-info">NIT. 860.023.878-9</div>
    <div class="institucional-title" style="font-size: 1.1rem; font-weight: bold;">HOJA DE VIDA EQUIPOS DE CÓMPUTO</div>
    <div class="institucional-doc">
        <div><b>TIPO DOCUMENTO:</b> FORMATO</div>
        <div><b>PROCESO:</b> SISTEMAS</div>
        <div><b>CÓDIGO:</b> GTC-ST-F-01</div>
        <div><b>PÁGINA:</b> 1 de 1</div>
        <div><b>REVISIÓN:</b> NOVIEMBRE 2021</div>
        <div><b>VERSIÓN:</b> 02</div>
    </div>
</div>

<div class="institucional-section">
    <div class="institucional-section-title">1. DATOS DEL RESPONSABLE</div>
    <table class="institucional-table w-100">
        <tr>
            <th>Nombre Responsable / Área encargada</th>
            <th>Ubicación</th>
            <th>Equipo</th>
        </tr>
        <tr>
            <td>{{ equipo.responsable }}</td>
            <td>{{ equipo.Ubicacion }}</td>
            <td>{{ equipo.nombreEquipo }}</td>
        </tr>
    </table>
</div>

<div class="institucional-section">
    <div class="institucional-section-title">2. DATOS DEL EQUIPO Y CONFIGURACIÓN DE HARDWARE</div>
    <div class="institucional-table-wrapper">
        <table class="institucional-table mb-2">
            <tr><th colspan="4">2.1 CPU</th></tr>
            <tr>
                <th>CPU Marca</th><th>Modelo/Tipo</th><th>Placa Inventario</th><th>Serial</th>
            </tr>
            <tr>
                <td>{{ equipo.cpuFabricante }}</td>
                <td>{{ equipo.procesadorNombre }}</td>
                <td>{{ equipo.cpuPlaca }}</td>
                <td>{{ equipo.cpuSerial }}</td>
            </tr>
            <tr>
                <th>Procesador Marca</th><th>Velocidad GHz</th><th>Serial</th><th></th>
            </tr>
            <tr>
                <td>{{ equipo.procesadorNombre }}</td>
                <td>{{ equipo.procesadorVelo }}</td>
                <td>{{ equipo.procesadorSerial }}</td>
                <td></td>
            </tr>
            <tr>
                <th>Memoria RAM Marca</th><th>Tamaño</th><th>Serial</th><th>Marca 2</th>
            </tr>
            <tr>
                <td>{{ equipo.ram1Marca }}</td>
                <td>{{ equipo.ram1capacidad }}</td>
                <td>{{ equipo.ram1Serial }}</td>
                <td>{{ equipo.ram2Marca }}</td>
            </tr>
            <tr>
                <th>Disco Duro Marca</th><th>Capacidad</th><th>Serial</th><th>Unidad CD/DVD</th>
            </tr>
            <tr>
                <td>{{ equipo.discoMarca }}</td>
                <td>{{ equipo.discoCapacidad }}</td>
                <td>{{ equipo.discoSerial }}</td>
                <td>{{ equipo.unidadCD }}</td>
            </tr>
        </table>
    </div>
    <div class="institucional-table-wrapper">
        <table class="institucional-table mb-2">
            <tr><th colspan="4">2.2 MONITOR</th></tr>
            <tr>
                <th>Marca</th><th>Modelo/Tipo</th><th>Placa Inventario</th><th>Serial</th>
            </tr>
            <tr>
                <td>{{ equipo.monitorMarca }}</td>
                <td>{{ equipo.monitorModelo }}</td>
                <td>{{ equipo.monitorPlaca }}</td>
                <td>{{ equipo.monitorSerial }}</td>
            </tr>
        </table>
    </div>
    <div class="institucional-table-wrapper">
        <table class="institucional-table mb-2">
            <tr><th colspan="3">2.3 TECLADO</th></tr>
            <tr>
                <th>Marca</th><th>Serial</th><th></th>
            </tr>
            <tr>
                <td>{{ equipo.tecladoMarca }}</td>
                <td>{{ equipo.tecladoSerial }}</td>
                <td></td>
            </tr>
        </table>
    </div>
    <div class="institucional-table-wrapper">
        <table class="institucional-table mb-2">
            <tr><th colspan="3">2.4 MOUSE</th></tr>
            <tr>
                <th>Marca</th><th>Serial</th><th></th>
            </tr>
            <tr>
                <td>{{ equipo.mouseMarca }}</td>
                <td>{{ equipo.mouseSerial }}</td>
                <td></td>
            </tr>
        </table>
    </div>
</div>

<div class="institucional-section">
    <div class="institucional-section-title">3. CONFIGURACIÓN DE RED</div>
    <table class="institucional-table w-100">
        <tr>
            <th>En red</th><th>Dirección MAC</th>
        </tr>
        <tr>
            <td>{% if equipo.VPN %}SI{% else %}NO{% endif %}</td>
            <td>{{ equipo.direccionMac }}</td>
        </tr>
    </table>
</div>

<div class="institucional-section">
    <div class="institucional-section-title">4. USUARIO DEL EQUIPO</div>
    <table class="institucional-table w-100">
        <tr>
            <th>NOMBRE</th>
        </tr>
        <tr>
            <td>{{ equipo.nombreUsuario }}</td>
        </tr>
    </table>
</div>

<div class="institucional-section">
    <div class="institucional-section-title">5. SOFTWARES INSTALADOS</div>
    <table class="institucional-table w-100">
        <tr>
            <th>Sistema Operativo</th><th>Descripción/Versión</th>
        </tr>
        <tr>
            <td>Windows</td>
            <td>{{ equipo.Observaciones }}</td>
        </tr>
    </table>
</div>

<div class="institucional-section">
    <div class="institucional-section-title">6. HISTORIAL DE MANTENIMIENTOS</div>
    {% if mantenimientos %}
        {% for mant in mantenimientos %}
        <div class="institucional-table-wrapper mb-3">
            <table class="institucional-table">
                <tr>
                    <th>Fecha</th>
                    <td>{{ mant.Fecha }}</td>
                </tr>
                <tr>
                    <th>Técnico</th>
                    <td>{{ mant.Tecnico }}</td>
                </tr>
                <tr>
                    <th>Responsable</th>
                    <td>{{ mant.ResponsableEquipo }}</td>
                </tr>
                <tr>
                    <th>Observaciones</th>
                    <td>{{ mant.Observaciones }}</td>
                </tr>
                <tr>
                    <th>Firma del Responsable</th>
                    <td>
                        {% if mant.FirmaResponsable %}
                            <img src="{{ mant.FirmaResponsable }}" alt="Firma del responsable" style="max-width: 200px; max-height: 100px;">
                        {% else %}
                            <span style="color: #666;">Pendiente</span>
                        {% endif %}
                    </td>
                </tr>
            </table>
        </div>
        {% endfor %}
    {% else %}
        <p>No hay mantenimientos registrados</p>
    {% endif %}
</div>

<div class="no-print mt-4 mb-4 text-end">
    <button class="btn btn-primary" onclick="window.print()">
        Imprimir / Guardar PDF
    </button>
</div>
{% endblock %} 